window.dtsv={title:document.title};var J=jQuery.noConflict();var dtsl={front:{init:function(){dtsl.front.makeTargets();dtsv.images=J("img.dtse-img");dtsl.front.makeDraggable();dtsv.targets=J("#dtse-targets li");dtsl.front.makeDroppable()},createTip:function(a){if(J("#dtse-tip").length===0){J("<div>").html("<span>"+dtsv.tipsLabel+"</span><span class='arrow'></span>").attr("id","dtse-tip").css({left:a.pageX+30,top:a.pageY-16}).appendTo("body").fadeIn(1200)}},makeTargets:function(){J("body").append(dtsv.networks)},extractClassForPermalink:function(a){var b=/(dtse-post-[0-9]+)/;a=a.match(b);a=a[1].replace(/-/g,"_");return a},makeDraggable:function(){dtsv.images.draggable({helper:function(){if(dtsv.sharePermalink===true){var cssClass=J(this).attr("class");cssClass=dtsl.front.extractClassForPermalink(cssClass);dtsv.currentUrl=eval("dtsv."+cssClass+"_permalink");dtsv.title=eval("dtsv."+cssClass+"_title")}return J("<div>").attr("id","dtse-helper").html("<span>"+dtsv.title+"</span><img id='dtse-thumb' src='"+J(this).attr("src")+"'>").appendTo("body")},cursor:"pointer",cursorAt:{left:180,top:53},zIndex:99999,start:function(){J("<div>").attr("id","dtse-overlay").css("opacity",0.7).appendTo("body");J("#dtse-tip").remove();J(this).unbind("mouseenter");dtsv.targetsID=J("#dtse-targets");dtsv.targetsID.css("left",(J("body").width()/2)-dtsv.targetsID.width()/2);var targetHeight=dtsv.targetsID.height();if(dtsv.targetsPosition=="middle"){var middle=(J(window).height()/2-targetHeight/2);dtsv.targetsID.css("top",middle+"px").slideDown()}if(dtsv.targetsPosition=="bottom"){var bottom=(J(window).height()-(targetHeight*2)-10);dtsv.targetsID.css("top",bottom+"px").slideDown()}if((dtsv.targetsPosition=="top")||(dtsv.targetsPosition===undefined)){dtsv.targetsID.slideDown()}},stop:function(){dtsv.targetsID.slideUp();J("span.dtse-share",dtsv.targetsID).remove();J("#dtse-overlay").remove();J(this).bind("mouseenter",dtsl.front.createTip)}}).bind("mouseenter",dtsl.front.createTip).mousemove(function(e){J("#dtse-tip").css({left:e.pageX+30,top:e.pageY-16})}).mouseleave(function(){J("#dtse-tip").remove()})},makeDroppable:function(){dtsv.targets.droppable({tolerance:"pointer",over:function(){J("span.dtse-share","#dtse-targets").remove();J("<span>").addClass("dtse-share").text(dtsv.targetsLabel+" "+J(this).attr("id")).addClass("active").appendTo(J(this)).fadeIn()},drop:function(){var c=J(this).attr("id");var b=dtsv.currentUrl;if(dtsv.sharePermalink===false){b=window.location.href}baseUrl=J(this).find("a").attr("href");var a="";if(c.indexOf("Twitter")!=-1){dtsl.front.isGD(baseUrl,b)}else{if(c.indexOf("Delicious")!=-1){a="save?url="+b+"&title="+dtsv.title;window.location.href=baseUrl+a}else{if(c.indexOf("Facebook")!=-1){a="sharer.php?u="+b+"&t="+dtsv.title;window.location.href=baseUrl+a}else{if(c.indexOf("Digg")!=-1){a="submit?phase=2&url="+b+"&title="+dtsv.title+"&bodytext=";window.location.href=baseUrl+a}else{if(c.indexOf("Reddit")!=-1){a="submit?url="+b+"&title="+dtsv.title;window.location.href=baseUrl+a}else{if(c.indexOf("Technorati")!=-1){a="faves?add="+b;window.location.href=baseUrl+a}else{if(c.indexOf("LinkedIn")!=-1){a="shareArticle?mini=true&url="+b+"&title="+dtsv.title+"&source="+dtsv.title+"&summary=";window.location.href=baseUrl+a}else{if(c.indexOf("StumbleUpon")!=-1){a="submit?url="+b+"&title="+dtsv.title;window.location.href=baseUrl+a}else{if(c.indexOf("MySpace")!=-1){a="Modules/PostTo/Pages/?u="+b+"&t="+dtsv.title;window.location.href=baseUrl+a}}}}}}}}}}})},isGD:function(a,c){var b="";J.ajax({type:"GET",url:dtsv.root+"lib/dtse.ajax.php",data:"action=isgd&longurl="+c,dataType:"text",success:function(d){b="home?status="+dtsv.title+": "+d;window.location.href=a+b},error:function(d,f,e){b="home?status="+dtsv.title+": "+c;window.location.href=a+b}})}}};